{"version":3,"sources":["webpack:///./src/views/UserSetting.vue?41b3","webpack:///./src/views/UserSetting.vue?874c","webpack:///src/views/UserSetting.vue","webpack:///./src/views/UserSetting.vue?fd9f","webpack:///./src/views/UserSetting.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","handleSubmit","_m","_v","directives","name","rawName","value","expression","staticStyle","attrs","domProps","$event","target","composing","account","email","password","passwordCheck","isProcessing","staticRenderFns","data","methods","icon","title","userAPI","console","fetchAccount","created","components","Sidebar","component"],"mappings":"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","file":"js/chunk-4c5299a4.921a91f2.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=style&index=0&id=228741a5&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"setting-container\"},[_c('Sidebar'),_c('form',{staticClass:\"setting-form\",on:{\"submit\":_vm.handleSubmit}},[_vm._m(0),_c('div',{staticClass:\"input-container\"},[_c('label',{staticClass:\"input-title\"},[_vm._v(\" 帳號 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.account),expression:\"account\"}],staticClass:\"accountName\",staticStyle:{\"font-size\":\"25px\"},attrs:{\"type\":\"accountName\"},domProps:{\"value\":(_vm.account)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.account=$event.target.value}}}),_c('label',{staticClass:\"error-text\"},[_vm._v(\" 帳號不存在！ \")])]),_c('div',{staticClass:\"input-container\"},[_c('label',{staticClass:\"input-title\"},[_vm._v(\" 名稱 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"name\",staticStyle:{\"font-size\":\"25px\"},attrs:{\"type\":\"name\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}}),_c('label',{staticClass:\"error-text\"},[_vm._v(\" 名稱不存在！ \")])]),_c('div',{staticClass:\"input-container\"},[_c('label',{staticClass:\"input-title\"},[_vm._v(\" Email \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"email\",staticStyle:{\"font-size\":\"25px\"},attrs:{\"type\":\"email\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}}),_c('label',{staticClass:\"error-text\"},[_vm._v(\" Email不存在！ \")])]),_c('div',{staticClass:\"input-container\"},[_c('label',{staticClass:\"input-title\"},[_vm._v(\" 密碼 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],staticClass:\"password\",staticStyle:{\"font-size\":\"25px\"},attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_c('label',{staticClass:\"error-text\"},[_vm._v(\" 密碼不存在！ \")])]),_c('div',{staticClass:\"input-container\"},[_c('label',{staticClass:\"input-title\"},[_vm._v(\" 密碼確認 \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.passwordCheck),expression:\"passwordCheck\"}],staticClass:\"passwordCheck\",staticStyle:{\"font-size\":\"25px\"},attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.passwordCheck)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.passwordCheck=$event.target.value}}}),_c('label',{staticClass:\"error-text\"},[_vm._v(\" 密碼確認錯誤！ \")])]),_c('button',{staticClass:\"saveBtn\",attrs:{\"disabled\":_vm.isProcessing}},[_vm._v(\"儲存\")])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-header\"},[_c('span',{staticClass:\"form-title\"},[_vm._v(\"帳戶設定\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"setting-container\">\n    <Sidebar />\n    <form class=\"setting-form\" @submit=\"handleSubmit\">\n      <div class=\"form-header\">\n        <span class=\"form-title\">帳戶設定</span>\n      </div>\n\n      <div class=\"input-container\">\n        <label class=\"input-title\"> 帳號 </label>\n        <input\n          v-model=\"account\"\n          class=\"accountName\"\n          type=\"accountName\"\n          style=\"font-size: 25px\"\n        />\n        <label class=\"error-text\"> 帳號不存在！ </label>\n      </div>\n\n      <div class=\"input-container\">\n        <label class=\"input-title\"> 名稱 </label>\n        <input\n          v-model=\"name\"\n          class=\"name\"\n          type=\"name\"\n          style=\"font-size: 25px\"\n        />\n        <label class=\"error-text\"> 名稱不存在！ </label>\n      </div>\n\n      <div class=\"input-container\">\n        <label class=\"input-title\"> Email </label>\n        <input\n          v-model=\"email\"\n          class=\"email\"\n          type=\"email\"\n          style=\"font-size: 25px\"\n        />\n        <label class=\"error-text\"> Email不存在！ </label>\n      </div>\n\n      <div class=\"input-container\">\n        <label class=\"input-title\"> 密碼 </label>\n        <input\n          v-model=\"password\"\n          class=\"password\"\n          type=\"password\"\n          style=\"font-size: 25px\"\n        />\n        <label class=\"error-text\"> 密碼不存在！ </label>\n      </div>\n\n      <div class=\"input-container\">\n        <label class=\"input-title\"> 密碼確認 </label>\n        <input\n          v-model=\"passwordCheck\"\n          class=\"passwordCheck\"\n          type=\"password\"\n          style=\"font-size: 25px\"\n        />\n        <label class=\"error-text\"> 密碼確認錯誤！ </label>\n      </div>\n\n      <button class=\"saveBtn\" :disabled=\"isProcessing\">儲存</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport Sidebar from '../components/Sidebar.vue'\nimport userAPI from '../apis/user'\n\nexport default {\n  data() {\n    return {\n      account: '',\n      name: '',\n      email: '',\n      password: '',\n      passwordCheck: '',\n      isProcessing: false\n    }\n  },\n  methods: {\n    async handleSubmit() {\n      try {\n        // 前端驗證\n        if (!this.account) {\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: '請填入想更改的帳號'\n          })\n\n          return\n        }\n\n        if (!this.name) {\n          this.$bus.$emit('toast', { icon: 'error', title: '請填入名稱' })\n\n          return\n        } else if (this.name.length > 50) {\n          this.$bus.$emit('toast', { icon: 'error', title: '字數超出上限！' })\n        }\n\n        if (!this.email) {\n          this.$bus.$emit('toast', { icon: 'error', title: '請填入 Email' })\n\n          return\n        } else if (!/[^@\\s]+@[^@\\s]+\\.[^@\\s]+/.test(this.email)) {\n          this.$bus.$emit('toast', { icon: 'error', title: 'Email 格式錯誤' })\n          return\n        }\n\n        if (!this.password) {\n          this.$bus.$emit('toast', { icon: 'error', title: '請填入密碼' })\n\n          return\n        } else if (this.password.length < 4) {\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: '密碼至少要有四個字'\n          })\n\n          return\n        }\n        // 密碼確認欄位\n        if (!this.passwordCheck) {\n          this.$bus.$emit('toast', { icon: 'error', title: '請再次確認密碼' })\n\n          return\n        } else if (this.password !== this.passwordCheck) {\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: '密碼與密碼確認輸入內容不同'\n          })\n\n          return\n        }\n\n        this.isProcessing = true\n\n        const { data } = await userAPI.editAccount({\n          account: this.account,\n          name: this.name,\n          email: this.email,\n          password: this.password\n        })\n\n        console.log(data)\n\n        if (data.status === 'success') {\n          this.$bus.$emit('toast', {\n            icon: 'success',\n            title: '資料修改成功'\n          })\n          this.isProcessing = false\n        } else {\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: `${data.message}`\n          })\n          throw new Error(data.message)\n        }\n      } catch (error) {\n        this.isProcessing = false\n        console.log(error)\n        this.$bus.$emit('toast', {\n          icon: 'error',\n          title: `${data.message}`\n        })\n      }\n    },\n    async fetchAccount() {\n      try {\n        const { data } = await userAPI.getCurrent()\n\n        if (data.status !== 'success') {\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: '無法取得資料'\n          })\n        }\n\n        const { account, name, email } = data.data\n        this.account = account\n        this.name = name\n        this.email = email\n      } catch (error) {\n        console.log(error)\n        this.$bus.$emit({ title: `${error}` })\n      }\n    }\n  },\n  created() {\n    this.fetchAccount()\n  },\n  components: {\n    Sidebar\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.setting-container {\n  display: flex;\n  height: 100%;\n}\n\n.setting-form {\n  border-left: 1px solid var(--theme-line);\n  width: 100%;\n  position: relative;\n  margin-left: 40px;\n}\n\n.form-header {\n  border-bottom: 1px solid var(--theme-line);\n  backdrop-filter: blur(12px);\n  position: relative;\n  padding-left: 20px;\n  width: 100%;\n  height: 55px;\n}\n\n.form-title {\n  font-size: 19px;\n  font-weight: 700;\n  line-height: 27.51px;\n  color: var(--main-text);\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.input-container {\n  position: relative;\n  width: 100%;\n\n  // 顯示錯誤提示\n  &.invalid {\n    .error-text {\n      visibility: visible;\n    }\n  }\n}\n\n.input-title {\n  position: absolute;\n  top: 35px;\n  left: 26px;\n  color: var(--info);\n  font-family: 'Noto Sans TC';\n  font-size: 15px;\n  font-weight: 500;\n  line-height: 15px;\n}\n\ninput {\n  @include size(642px, 52px);\n  @include margin(30px, 405px, 0, 16px);\n  background-color: var(--input-background);\n  border: none;\n  border-bottom: 2px solid var(--info);\n  line-height: normal;\n  text-align: center;\n  // TODO:input的focus邊框沒有規定顏色，看要不要換其他顏色\n  &:hover,\n  &:focus {\n    border-color: inherit;\n    border: 1px solid var(--theme-color);\n  }\n}\n\n// TODO:待串接後端驗證後，錯誤提示要改變input的border樣式\n.error-text {\n  visibility: hidden;\n  color: var(--invalid);\n  margin-top: 5px;\n  position: absolute;\n  left: 16px;\n  top: 80px;\n  font-size: 15px;\n  font-weight: 500;\n  line-height: 15px;\n}\n\n.saveBtn {\n  @include size(116px, 46px);\n  @include position(absolute, 515px, 0, 0, 536px);\n  background-color: var(--theme-color);\n  border-radius: 50px;\n  color: var(--just-white);\n  font-size: 18px;\n  font-weight: 700;\n  line-height: 26.06px;\n  &:hover {\n    background-color: var(--hover-color);\n  }\n  &:active,\n  &:focus {\n    background-color: var(--focus-color);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserSetting.vue?vue&type=template&id=228741a5&scoped=true&\"\nimport script from \"./UserSetting.vue?vue&type=script&lang=js&\"\nexport * from \"./UserSetting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserSetting.vue?vue&type=style&index=0&id=228741a5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"228741a5\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}