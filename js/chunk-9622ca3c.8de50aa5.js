(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9622ca3c"],{"1a74":function(t,e,s){},"2b8e":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("Sidebar"),s("div",{staticClass:"follower"},[s("FollowingList",{attrs:{followings:t.followings}})],1),s("RightColumn")],1)},a=[],o=s("1da1"),i=s("5530"),r=(s("96cf"),s("5ea5")),l=s("dc59"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"following-container"},[n("div",{staticClass:"following-header"},[n("button",{staticClass:"back-to",attrs:{type:"button"},on:{click:function(e){return t.$router.go(-1)}}},[n("img",{staticClass:"back-icon",attrs:{src:s("30e9")}})]),n("div",{staticClass:"title"},[n("router-link",{staticClass:"name",attrs:{to:{path:"/users/"+t.id}}},[n("span",{staticClass:"name"},[t._v(t._s(t.name))])]),n("p",[t._v(t._s(t.tweetCount)+" 推文")])],1)]),n("div",{staticClass:"nav-tabs"},[n("button",{staticClass:"nav-item",attrs:{type:"button"}},[n("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-follower",params:t.id}}},[t._v(" 跟隨者 ")])],1),n("button",{staticClass:"nav-item",class:{active:t.isActive},attrs:{type:"button"}},[n("router-link",{staticClass:"nav-link",class:{active:t.isActive},attrs:{to:{name:"user-following",params:t.id}}},[t._v(" 正在跟隨 ")])],1)]),n("div",{staticClass:"follower-list"},t._l(t.users,(function(e){return n("div",{key:e.id,staticClass:"list-item"},[n("div",{staticClass:"user-info"},[n("div",{staticClass:"user-avatar"},[n("router-link",{staticClass:"avatar-img",attrs:{to:{path:"/users/"+e.Followings.id}}},[n("img",{staticClass:"avatar-img",attrs:{src:e.Followings.avatar}})])],1),n("div",{staticClass:"content"},[n("router-link",{attrs:{to:{path:"/users/"+e.Followings.id}}},[n("div",{staticClass:"user-name"},[t._v(t._s(e.Followings.name))]),n("div",{staticClass:"user-accountName"},[t._v("@"+t._s(e.Followings.account))])]),n("span",{staticClass:"introduce"},[t._v(" "+t._s(e.Followings.introduction)+" ")])],1)]),e.Followings.isFollowed?n("div",{staticClass:"toggleBtn"},[n("button",{staticClass:"following-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteFollow(e.Followings.id)}}},[t._v("正在追隨")])]):n("div",{staticClass:"toggleBtn"},[n("button",{staticClass:"unfollowed-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.addFollow(e.Followings.id)}}},[t._v("追隨")])])])})),0)])},u=[],d=s("2909"),w=(s("b0c0"),s("4de4"),s("d3b7"),s("2f62")),f=s("1602"),v=s("604d"),g={name:"FollowingList",props:{followings:{type:Array,required:!0}},data:function(){return{id:"",name:"",tweetCount:"",isActive:!0,users:this.followings}},watch:{followings:function(t){this.users=Object(d["a"])(t)}},created:function(){console.log(this.followings);var t=this.$route.params.id;this.fetchUser(t)},computed:Object(i["a"])({},Object(w["b"])(["currentUser"])),methods:{fetchUser:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,f["a"].getProfile({userId:t});case 3:return n=s.sent,a=n.data,s.next=7,a.id;case 7:e.id=s.sent,e.name=a.name,e.tweetCount=a.tweetCount,s.next=15;break;case 12:s.prev=12,s.t0=s["catch"](0),console.log(s.t0);case 15:case"end":return s.stop()}}),s,null,[[0,12]])})))()},addFollow:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,e.currentUser.id!==t){s.next=4;break}return e.$bus.$emit("toast",{icon:"error",title:"不能追隨自己喔"}),s.abrupt("return");case 4:return s.next=6,v["a"].addFollow(t);case 6:n=s.sent,n.data,e.users.filter((function(e){e.Followings.id===t&&(e.Followings.isFollowed=!0)})),e.$bus.$emit("toast",{icon:"success",title:"追隨成功"}),s.next=15;break;case 12:s.prev=12,s.t0=s["catch"](0),console.log(s.t0);case 15:case"end":return s.stop()}}),s,null,[[0,12]])})))()},deleteFollow:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,v["a"].deleteFollow(t);case 3:n=s.sent,n.data,e.users.filter((function(e){e.Followings.id===t&&(e.Followings.isFollowed=!1)})),e.$bus.$emit("toast",{icon:"success",title:"取消追隨成功"}),s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0);case 12:case"end":return s.stop()}}),s,null,[[0,9]])})))()}}},p=g,m=(s("9803"),s("2877")),b=Object(m["a"])(p,c,u,!1,null,"f612dc62",null),h=b.exports,C={name:"UserFollowings",components:{Sidebar:r["a"],RightColumn:l["a"],FollowingList:h},data:function(){return{following:{followerId:"",followingId:"",createdAt:"",followings:{name:"",account:"",avatar:"",id:-1,introduction:""},isFollowed:!1},followings:[]}},created:function(){var t=this.$route.params.id;this.fetchFollowings(t)},computed:Object(i["a"])({},Object(w["b"])(["currentUser"])),methods:{fetchFollowings:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,f["a"].getUserFollowings(t);case 3:n=s.sent,a=n.data,e.followings=a,s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),console.log(s.t0);case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()}}},F=C,k=(s("84ed"),Object(m["a"])(F,n,a,!1,null,"cc78cb70",null));e["default"]=k.exports},"30e9":function(t,e,s){t.exports=s.p+"img/back-icon.f3e5a7a2.svg"},"84ed":function(t,e,s){"use strict";s("1a74")},9803:function(t,e,s){"use strict";s("ea16")},ea16:function(t,e,s){}}]);
//# sourceMappingURL=chunk-9622ca3c.8de50aa5.js.map